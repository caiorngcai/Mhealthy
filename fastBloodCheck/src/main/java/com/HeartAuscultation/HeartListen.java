package com.HeartAuscultation;

import java.io.File;
import java.util.ArrayList;

import com.Bean.ECGData;
import com.BlueTooth.ConnectThread;
import com.BlueTooth.Constant;
import com.Utils.ContantValue;
import com.Utils.SPutil;
import com.Utils.SysApplication;
import com.geniuseoe.demo.R;
import android.app.Activity;
import android.app.TabActivity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.graphics.Color;
import android.graphics.Paint;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.RelativeLayout;
import android.widget.TabHost;
import android.widget.TextView;
import android.widget.Toast;

public class HeartListen extends TabActivity {
		//Myhandler myhandler=new Myhandler();
		DemoView demoView;
		private TextView bpm_textview;
	private ECGData ecgData=new ECGData();
	ArrayList<Float> dataList,tempList,resultList;
	int intt = 0;
	float[] data = {
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			0, 0, 0, 0, 0, 345, 877, 1487, 2114, 2704, 3206, 3590, 3845, 3985,
			4041, 4049, 4043, 4052, 4085, 4095, 4095, 4095, 4095, 4095, 4095,
			4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095,
			4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095, 4095,
			4095, 4075, 4052, 4030, 4012, 3996, 3985, 3974, 3962, 3950, 3935,
			3919, 3902, 3884, 3869, 3855, 3842, 3830, 3819, 3806, 3794, 3781,
			3766, 3752, 3738, 3723, 3710, 3696, 3684, 3671, 3658, 3644, 3631,
			3618, 3605, 3593, 3582, 3572, 3561, 3550, 3539, 3526, 3514, 3502,
			3490, 3479, 3468, 3458, 3446, 3435, 3424, 3412, 3400, 3389, 3378,
			3366, 3358, 3348, 3339, 3329, 3318, 3305, 3294, 3282, 3271, 3261,
			3252, 3244, 3236, 3228, 3220, 3210, 3200, 3190, 3180, 3170, 3162,
			3153, 3145, 3136, 3128, 3118, 3108, 3098, 3088, 3080, 3072, 3065,
			3059, 3052, 3044, 3035, 3025, 3015, 3005, 2996, 2989, 2981, 2974,
			2968, 2961, 2954, 2948, 2940, 2933, 2926, 2920, 2913, 2906, 2900,
			2892, 2883, 2875, 2866, 2859, 2851, 2844, 2839, 2832, 2826, 2821,
			2814, 2808, 2802, 2796, 2792, 2786, 2782, 2776, 2770, 2763, 2754,
			2746, 2739, 2732, 2726, 2722, 2719, 2715, 2712, 2708, 2702, 2695,
			2689, 2682, 2678, 2673, 2669, 2666, 2663, 2659, 2653, 2648, 2641,
			2634, 2630, 2625, 2622, 2620, 2619, 2618, 2615, 2612, 2608, 2603,
			2599, 2594, 2590, 2585, 2582, 2578, 2574, 2569, 2564, 2559, 2552,
			2546, 2540, 2534, 2528, 2521, 2514, 2509, 2503, 2499, 2495, 2492,
			2490, 2488, 2484, 2480, 2474, 2468, 2461, 2455, 2451, 2449, 2448,
			2446, 2446, 2446, 2443, 2439, 2433, 2425, 2420, 2415, 2414, 2418,
			2425, 2438, 2453, 2470, 2485, 2498, 2504, 2503, 2495, 2481, 2461,
			2435, 2409, 2380, 2353, 2330, 2310, 2293, 2281, 2274, 2271, 2272,
			2278, 2286, 2298, 2311, 2324, 2335, 2344, 2349, 2351, 2349, 2345,
			2341, 2336, 2333, 2332, 2332, 2333, 2334, 2334, 2332, 2330, 2326,
			2322, 2319, 2316, 2315, 2315, 2315, 2315, 2315, 2314, 2312, 2310,
			2309, 2308, 2308, 2306, 2305, 2304, 2303, 2300, 2298, 2295, 2293,
			2293, 2293, 2294, 2295, 2295, 2294, 2293, 2291, 2289, 2286, 2284,
			2284, 2284, 2284, 2284, 2284, 2284, 2283, 2283, 2283, 2284, 2286,
			2288, 2290, 2291, 2291, 2289, 2286, 2284, 2282, 2281, 2280, 2281,
			2282, 2284, 2285, 2285, 2285, 2284, 2284, 2283, 2283, 2283, 2284,
			2284, 2283, 2283, 2282, 2281, 2280, 2280, 2279, 2278, 2276, 2274,
			2270, 2264, 2258, 2251, 2243, 2235, 2229, 2221, 2214, 2206, 2199,
			2191, 2183, 2176, 2170, 2165, 2162, 2159, 2156, 2153, 2150, 2145,
			2140, 2135, 2132, 2129, 2126, 2125, 2124, 2123, 2122, 2120, 2118,
			2115, 2114, 2114, 2114, 2116, 2118, 2118, 2118, 2116, 2114, 2111,
			2109, 2106, 2105, 2105, 2105, 2106, 2106, 2106, 2106, 2105, 2105,
			2105, 2105, 2106, 2106, 2105, 2104, 2103, 2101, 2099, 2098, 2098,
			2099, 2101, 2102, 2103, 2103, 2103, 2101, 2099, 2098, 2096, 2095,
			2096, 2098, 2100, 2101, 2101, 2101, 2100, 2099, 2098, 2096, 2095,
			2095, 2095, 2095, 2095, 2095, 2095, 2095, 2096, 2096, 2098, 2098,
			2096, 2095, 2093, 2091, 2090, 2089, 2089, 2090, 2091, 2092, 2092,
			2092, 2091, 2089, 2088, 2088, 2088, 2089, 2090, 2091, 2091, 2090,
			2088, 2084, 2082, 2080, 2079, 2080, 2082, 2083, 2085, 2086, 2086,
			2086, 2085, 2084, 2084, 2085, 2085, 2086, 2086, 2084, 2082, 2080,
			2076, 2075, 2074, 2075, 2078, 2081, 2083, 2084, 2085, 2085, 2084,
			2083, 2082, 2082, 2082, 2082, 2082, 2082, 2082, 2081, 2080, 2080,
			2080, 2082, 2084, 2088, 2090, 2092, 2092, 2092, 2092, 2091, 2090,
			2090, 2091, 2092, 2093, 2093, 2094, 2093, 2092, 2092, 2091, 2091,
			2090, 2089, 2088, 2084, 2081, 2076, 2072, 2068, 2065, 2064, 2064,
			2065, 2068, 2070, 2072, 2073, 2073, 2073, 2072, 2070, 2068, 2066,
			2064, 2064, 2064, 2064, 2065, 2065, 2065, 2063, 2062, 2060, 2059,
			2059, 2064, 2073, 2086, 2104, 2124, 2144, 2161, 2172, 2176, 2171,
			2159, 2140, 2116, 2092, 2068, 2045, 2025, 2007, 1993, 1982, 1975,
			1972, 1973, 1981, 1992, 2007, 2024, 2041, 2053, 2063, 2069, 2071,
			2070, 2068, 2066, 2065, 2068, 2070, 2072, 2074, 2074, 2074, 2072,
			2070, 2068, 2066, 2066, 2069, 2071, 2073, 2075, 2076, 2078, 2079,
			2079, 2079, 2079, 2079, 2079, 2079, 2078, 2076, 2076, 2076, 2076,
			2079, 2081, 2082, 2083, 2084, 2083, 2081, 2080, 2078, 2078, 2078,
			2079, 2081, 2083, 2085, 2086, 2088, 2088, 2088, 2088, 2089, 2090,
			2092, 2093, 2095, 2096, 2098, 2100, 2102, 2104, 2108, 2111, 2114,
			2116, 2119, 2120, 2120, 2120, 2120, 2120, 2121, 2122, 2123, 2124,
			2125, 2126, 2126, 2126, 2128, 2128, 2129, 2130, 2130, 2129, 2126,
			2122, 2118, 2112, 2106, 2102, 2098, 2094, 2092, 2089, 2084, 2080,
			2074, 2069, 2063, 2059, 2054, 2051, 2047, 2044, 2040, 2034, 2030,
			2024, 2018, 2015, 2013, 2011, 2011, 2011, 2011, 2011, 2010, 2010,
			2008, 2008, 2008, 2010, 2010, 2010, 2010, 2008, 2007, 2006, 2005,
			2004, 2004, 2005, 2006, 2007, 2008, 2010, 2010, 2010, 2010, 2010,
			2011, 2012, 2012, 2013, 2012, 2011, 2010, 2010, 2008, 2010, 2011,
			2013, 2015, 2017, 2020, 2021, 2021, 2021, 2020, 2018, 2018, 2017,
			2017, 2017, 2017, 2018, 2018, 2020, 2022, 2023, 2025, 2026, 2027,
			2026, 2025, 2024, 2022, 2022, 2022, 2023, 2026, 2030, 2032, 2033,
			2033, 2032, 2028, 2026, 2024, 2023, 2024, 2025, 2027, 2030, 2031,
			2031, 2031, 2030, 2028, 2028, 2027, 2027, 2027, 2027, 2027, 2026,
			2024, 2024, 2023, 2024, 2025, 2026, 2028, 2030, 2030, 2030, 2027,
			2026, 2025, 2025, 2026, 2028, 2031, 2033, 2034, 2035, 2035, 2035,
			2034, 2034, 2035, 2036, 2036, 2036, 2036, 2035, 2034, 2033, 2033,
			2034, 2035, 2037, 2040, 2041, 2042, 2042, 2040, 2038, 2037, 2036,
			2036, 2038, 2041, 2043, 2045, 2047, 2048, 2048, 2048, 2048, 2049,
			2050, 2051, 2052, 2053, 2054, 2055, 2055, 2056, 2056, 2056, 2055,
			2054, 2051, 2048, 2044, 2041, 2037, 2035, 2034, 2034, 2034, 2035,
			2035, 2034, 2033, 2032, 2031, 2031, 2031, 2032, 2033, 2033, 2033,
			2032, 2031, 2030, 2028, 2028, 2030, 2031, 2032, 2031, 2030, 2026,
			2024, 2024, 2026, 2034, 2047, 2065, 2088, 2109, 2129, 2142, 2148,
			2144, 2134, 2118, 2095, 2072, 2048, 2025, 2004, 1984, 1968, 1956,
			2288, 2290, 2291, 2291, 2289, 2286, 2284, 2282, 2281, 2280, 2281,
			2282, 2284, 2285, 2285, 2285, 2284, 2284, 2283, 2283, 2283, 2284,
			2284, 2283, 2283, 2282, 2281, 2280, 2280, 2279, 2278, 2276, 2274,
			2270, 2264, 2258, 2251, 2243, 2235, 2229, 2221, 2214, 2206, 2199,
			2191, 2183, 2176, 2170, 2165, 2162, 2159, 2156, 2153, 2150, 2145,
			2140, 2135, 2132, 2129, 2126, 2125, 2124, 2123, 2122, 2120, 2118,
			2115, 2114, 2114, 2114, 2116, 2118, 2118, 2118, 2116, 2114, 2111,
			2109, 2106, 2105, 2105, 2105, 2106, 2106, 2106, 2106, 2105, 2105,
			2105, 2105, 2106, 2106, 2105, 2104, 2103, 2101, 2099, 2098, 2098,
			2099, 2101, 2102, 2103, 2103, 2103, 2101, 2099, 2098, 2096, 2095,
			2096, 2098, 2100, 2101, 2101, 2101, 2100, 2099, 2098, 2096, 2095,
			2095, 2095, 2095, 2095, 2095, 2095, 2095, 2096, 2096, 2098, 2098,
			2096, 2095, 2093, 2091, 2090, 2089, 2089, 2090, 2091, 2092, 2092,
			2092, 2091, 2089, 2088, 2088, 2088, 2089, 2090, 2091, 2091, 2090,
			2088, 2084, 2082, 2080, 2079, 2080, 2082, 2083, 2085, 2086, 2086,
			2086, 2085, 2084, 2084, 2085, 2085, 2086, 2086, 2084, 2082, 2080,
			2076, 2075, 2074, 2075, 2078, 2081, 2083, 2084, 2085, 2085, 2084,
			2083, 2082, 2082, 2082, 2082, 2082, 2082, 2082, 2081, 2080, 2080,
			2080, 2082, 2084, 2088, 2090, 2092, 2092, 2092, 2092, 2091, 2090,
			2090, 2091, 2092, 2093, 2093, 2094, 2093, 2092, 2092, 2091, 2091,
			2090, 2089, 2088, 2084, 2081, 2076, 2072, 2068, 2065, 2064, 2064,
			2065, 2068, 2070, 2072, 2073, 2073, 2073, 2072, 2070, 2068, 2066,
			2064, 2064, 2064, 2064, 2065, 2065, 2065, 2063, 2062, 2060, 2059,
			2059, 2064, 2073, 2086, 2104, 2124, 2144, 2161, 2172, 2176, 2171,
			2159, 2140, 2116, 2092, 2068, 2045, 2025, 2007, 1993, 1982, 1975,
			1972, 1973, 1981, 1992, 2007, 2024, 2041, 2053, 2063, 2069, 2071,
			1947, 1944, 1946, 1953, 1965, 1978, 1994, 2008, 2021, 2030, 2036,
			2040, 2041, 2042, 2044, 2045, 2048, 2050, 2053, 2055, 2056, 2056,
			2056, 2055, 2054, 2054, 2053, 2053, 2053, 2054, 2055, 2058, 2059,
			2061, 2062, 2063, 2062, 2061, 2060, 2058, 2056, 2056, 2058, 2061,
			2064, 2069, 2073, 2075, 2076, 2076, 2075, 2074, 2073, 2072, 2072,
			2073, 2074, 2075, 2076, 2078, 2078, 2079, 2081, 2083, 2086, 2090,
			2092, 2094, 2094, 2094, 2093, 2093, 2093, 2094, 2095, 2099, 2101,
			2103, 2104, 2105, 2106, 2106, 2108, 2110, 2112, 2114, 2116, 2119,
			2120, 2121, 2121, 2122, 2123, 2124, 2126, 2129, 2130, 2131, 2130,
			2128, 2124, 2120, 2116, 2112, 2109, 2105, 2101, 2096, 2091, 2084,
			2076, 2069, 2061, 2054, 2048, 2043, 2038, 2035, 2031, 2027, 2025,
			2022, 2020, 2018, 2016, 2015, 2013, 2011, 2007, 2005, 2003, 2002,
			2002, 2002, 2004, 2005, 2006, 2006, 2005, 2004, 2002, 2001, 2001,
			2003, 2005, 2008, 2011, 2013, 2013, 2012, 2010, 2007, 2006, 2005,
			2005, 2007, 2008, 2011, 2012, 2012, 2012, 2012, 2011, 2010, 2010,
			2010, 2011, 2011, 2011, 2012, 2012, 2012, 2013, 2014, 2016, 2017,
			2020, 2021, 2021, 2021, 2021, 2021, 2021, 2022, 2023, 2024, 2025,
			2025, 2025, 2023, 2021, 2020, 2018, 2018, 2020, 2022, 2024, 2026,
			2027, 2028, 2028, 2028, 2028, 2030, 2030, 2030, 2030, 2028, 2026,
			2025, 2023, 2022, 2023, 2024, 2026, 2030, 2032, 2033, 2033, 2032,
			2030, 2027, 2026, 2025, 2026, 2028, 2031, 2032, 2034, 2035, 2035,
			2034, 2034, 2034, 2034, 2034, 2034, 2034, 2033, 2032, 2031, 2031,
			2031, 2031, 2032, 2033, 2035, 2035, 2035, 2035, 2034, 2033, 2032,
			2032, 2032, 2032, 2033, 2034, 2034, 2035, 2035, 2036, 2037, 2038,
			2040, 2041, 2041, 2041, 2041, 2040, 2040, 2040, 2041, 2043, 2045,
			2047, 2048, 2049, 2049, 2049, 2049, 2049, 2051, 2053, 2058, 2061,
			2063, 2065, 2064, 2062, 2060, 2056, 2054, 2053, 2053, 2053, 2053,
			2053, 2051, 2048, 2044, 2040, 2036, 2033, 2033, 2033, 2035, 2037,
			2040, 2041, 2041, 2040, 2038, 2036, 2035, 2035, 2035, 2036, 2037,
			2037, 2037, 2036, 2035, 2032, 2028, 2027, 2027, 2032, 2041, 2052,
			2070, 2090, 2110, 2129, 2143, 2151, 2151, 2142, 2126, 2105, 2082,
			2056, 2034, 2012, 1992, 1976, 1963, 1953, 1947, 1946, 1951, 1960,
			1972, 1988, 2005, 2022, 2035, 2045, 2049, 2050, 2049, 2047, 2046,
			2046, 2048, 2051, 2054, 2056, 2058, 2058, 2056, 2054, 2053, 2053,
			2053, 2055, 2058, 2060, 2061, 2062, 2062, 2061, 2061, 2061, 2062,
			2063, 2064, 2065, 2066, 2066, 2066, 2068, 2069, 2070, 2072, 2074,
			2076, 2078, 2078, 2078, 2076, 2075, 2075, 2076, 2079, 2082, 2085,
			2088, 2089, 2089, 2088, 2088, 2086, 2088, 2089, 2091, 2094, 2096,
			2099, 2100, 2101, 2102, 2104, 2106, 2110, 2113, 2116, 2121, 2123,
			2125, 2126, 2128, 2128, 2128, 2128, 2128, 2128, 2128, 2128, 2129,
			2129, 2130, 2131, 2133, 2134, 2135, 2136, 2135, 2132, 2128, 2122,
			2116, 2111, 2105, 2101, 2096, 2092, 2088, 2082, 2075, 2069, 2062,
			2055, 2051, 2047, 2044, 2041, 2038, 2035, 2033, 2030, 2026, 2024,
			2023, 2021, 2020, 2018, 2016, 2014, 2012, 2008, 2006, 2005, 2005,
			2005, 2007, 2010, 2012, 2013, 2014, 2014, 2013, 2012, 2011, 2010,
			2010, 2008, 2008, 2008, 2008, 2010, 2012, 2013, 2015, 2017, 2020,
			2020, 2020, 2018, 2017, 2015, 2015, 2015, 2016, 2017, 2020, 2021,
			2021, 2021, 2018, 2017, 2016, 2017, 2018, 2021, 2024, 2026, 2028,
			2027, 2026, 2024, 2023, 2022, 2022, 2024, 2026, 2028, 2030, 2030,
			2028, 2026, 2023, 2021, 2021, 2022, 2024, 2027, 2031, 2033, 2035,
			2035, 2034, 2033, 2032, 2031, 2031, 2031, 2032, 2032, 2032, 2032,
			2031, 2031, 2030, 2030, 2030, 2030, 2030, 2030, 2030, 2030, 2030,
			2030, 2030, 2031, 2032, 2032, 2033, 2033, 2032, 2032, 2031, 2031,
			2032, 2032, 2033, 2033, 2033, 2032, 2031, 2031, 2030, 2028, 2030,
			2030, 2031, 2031, 2031, 2031, 2030, 2030, 2030, 2031, 2033, 2035,
			2037, 2040, 2040, 2040, 2037, 2035, 2033, 2032, 2031, 2032, 2034,
			2036, 2038, 2041, 2041, 2041, 2041, 2040, 2041, 2042, 2043, 2045,
			2046, 2048, 2048, 2049, 2049, 2049, 2049, 2050, 2051, 2052, 2053,
			2054, 2055, 2055, 2054, 2054, 2054, 2053, 2053, 2052, 2051, 2050,
			2048, 2045, 2043, 2041, 2038, 2036, 2035, 2035, 2035, 2035, 2035,
			2035, 2036, 2036, 2036, 2035, 2033, 2032, 2030, 2028, 2027, 2028,
			2030, 2031, 2033, 2033, 2033, 2032, 2031, 2031, 2034, 2043, 2055,
			2073, 2094, 2115, 2133, 2145, 2149, 2144, 2132, 2112, 2089, 2064,
			2041, 2017, 1997, 1981, 1966, 1956, 1950, 1947, 1951, 1958, 1971,
			1987, 2004, 2021, 2034, 2043, 2047, 2048, 2046, 2044, 2043, 2043,
			2044, 2046, 2048, 2051, 2052, 2052, 2051, 2051, 2051, 2052, 2053,
			2054, 2055, 2056, 2056, 2056, 2055, 2055, 2055, 2058, 2060, 2062,
			2064, 2065, 2065, 2064, 2062, 2060, 2059, 2059, 2060, 2062, 2065,
			2070, 2073, 2076, 2079, 2079, 2080, 2079, 2078, 2076, 2076, 2075,
			2076, 2078, 2080, 2083, 2086, 2090, 2093, 2094, 2095, 2095, 2094,
			2094, 2094, 2096, 2100, 2104, 2109, 2113, 2116, 2118, 2118, 2116,
			2115, 2115, 2116, 2119, 2121, 2125, 2129, 2131, 2132, 2133, 2132,
			2131, 2130, 2128, 2126, 2126, 2124, 2123, 2121, 2119, 2116, 2114,
			2112, 2109, 2105, 2101, 2095, 2088, 2080, 2072, 2064, 2058, 2053,
			2049, 2047, 2044, 2042, 2038, 2034, 2030, 2025, 2022, 2018, 2017,
			2016, 2015, 2014, 2013, 2011, 2008, 2006, 2005, 2004, 2005, 2006,
			2008, 2010, 2011, 2010, 2008, 2007, 2006, 2006, 2006, 2007, 2008,
			2011, 2011, 2012, 2011, 2011, 2011, 2011, 2012, 2013, 2015, 2016,
			2017, 2017, 2016, 2015, 2014, 2013, 2012, 2012, 2013, 2013, 2014,
			2015, 2015, 2016, 2016, 2017, 2018, 2020, 2021, 2021, 2021, 2020,
			2020, 2020, 2021, 2022, 2024, 2026, 2028, 2028, 2028, 2026, 2024,
			2023, 2021, 2021, 2022, 2023, 2025, 2027, 2030, 2031, 2031, 2031,
			2031, 2031, 2030, 2030, 2028, 2027, 2025, 2024, 2023, 2022, 2023,
			2024, 2025, 2027, 2028, 2028, 2028, 2027, 2025, 2024, 2024, 2025,
			2026, 2027, 2030, 2030, 2030, 2028, 2027, 2026, 2025, 2026, 2027,
			2030, 2031, 2032, 2032, 2031, 2030, 2028, 2028, 2028, 2031, 2032,
			2034, 2034, 2034, 2032, 2030, 2027, 2026, 2025, 2026, 2028, 2031,
			2033, 2033, 2033, 2031, 2028, 2027, 2026, 2026, 2028, 2031, 2033,
			2034, 2035, 2034, 2033, 2032, 2031, 2031, 2031, 2032, 2033, 2034,
			2035, 2035, 2036, 2036, 2037, 2038, 2041, 2043, 2044, 2046, 2046,
			2047, 2047, 2047, 2048, 2048, 2049, 2050, 2050, 2050, 2049, 2049,
			2048, 2048, 2048, 2048, 2049, 2049, 2048, 2046, 2044, 2041, 2036,
			2034, 2032, 2032, 2032, 2033, 2034, 2035, 2034, 2033, 2030, 2027,
			2024, 2023, 2023, 2024, 2026, 2030, 2032, 2034, 2035, 2033, 2031,
			2026, 2023, 2021, 2022, 2026, 2036, 2051, 2070, 2091, 2111, 2129,
			2141, 2144, 2140, 2128, 2109, 2085, 2060, 2035, 2012, 1991, 1973,
			1960, 1950, 1943, 1941, 1944, 1951, 1963, 1977, 1994, 2011, 2024,
			2035, 2041, 2043, 2042, 2040, 2038, 2037, 2038, 2041, 2044, 2047,
			2050, 2051, 2051, 2050, 2049, 2048, 2047, 2048, 2049, 2050, 2050,
			2051, 2051, 2051, 2052, 2053, 2055, 2058, 2060, 2061, 2062, 2062,
			2062, 2061, 2060, 2060, 2060, 2061, 2062, 2062, 2063, 2063, 2063,
			2063, 2065, 2066, 2070, 2072, 2075, 2078, 2080, 2080, 2080, 2080,
			2080, 2081, 2083, 2085, 2088, 2091, 2092, 2094, 2094, 2095, 2096,
			2098, 2100, 2102, 2104, 2106, 2108, 2109, 2109, 2109, 2110, 2111,
			2112, 2114, 2116, 2118, 2120, 2120, 2121, 2122, 2123, 2125, 2126,
			2129, 2130, 2129, 2126, 2123, 2119, 2113, 2106, 2102, 2098, 2093,
			2089, 2083, 2078, 2071, 2063, 2054, 2048, 2042, 2037, 2034, 2032,
			2030, 2028, 2026, 2024, 2022, 2018, 2015, 2013, 2011, 2010, 2007,
			2006, 2005, 2004, 2004, 2004, 2004, 2004, 2004, 2003, 2002, 2000,
			1997, 1995, 1994, 1994, 1996, 1998, 2003, 2006, 2008, 2010, 2008,
			2006, 2004, 2001, 1998, 1998, 1998, 2001, 2003, 2006, 2007, 2008,
			2008, 2008, 2007, 2006, 2006, 2005, 2006, 2006, 2006, 2007, 2008,
			2010, 2011, 2012, 2012, 2013, 2013, 2012, 2011, 2011, 2010, 2010,
			2011, 2012, 2013, 2014, 2015, 2014, 2014, 2013, 2012, 2013, 2014,
			2016, 2018, 2020, 2021, 2020, 2017, 2015, 2012, 2010, 2008, 2008,
			2010, 2012, 2013, 2013, 2013, 2012, 2011, 2010, 2010, 2010, 2012,
			2013, 2014, 2015, 2015, 2014, 2013, 2012, 2011, 2012, 2014, 2016,
			2020, 2022, 2023, 2023, 2022, 2021, 2018, 2017, 2015, 2014, 2012,
			2010, 2008, 2006, 2006, 2006, 2008, 2011, 2014, 2017, 2020, 2021,
			2020, 2018, 2015, 2012, 2010, 2008, 2010, 2011, 2014, 2016, 2018,
			2020, 2020, 2018, 2015, 2012, 2007, 2004, 2002, 2001, 2002, 2004,
			2008, 2013, 2017, 2022, 2025, 2026, 2025, 2023, 2020, 2017, 2015,
			2016, 2018, 2022, 2025, 2028, 2030, 2030, 2027, 2025, 2023, 2022,
			2022, 2023, 2026, 2030, 2033, 2035, 2036, 2036, 2035, 2034, 2033,
			2032, 2031, 2030, 2028, 2026, 2023, 2020, 2016, 2013, 2011, 2010,
			2008, 2010, 2010, 2011, 2011, 2011, 2010, 2008, 2007, 2006, 2004,
			2004, 2003, 2003, 2004, 2006, 2008, 2011, 2012, 2011, 2008, 2005,
			2001, 1998, 1998, 2005, 2016, 2035, 2056, 2081, 2102, 2119, 2128,
			2125, 2115, 2096, 2073, 2048, 2024, 2002, 1983, 1966, 1952, 1941,
			1931, 1923, 1920, 1920, 1926, 1937, 1952, 1970, 1987, 2003, 2014,
			2022, 2025, 2024, 2022, 2020, 2017, 2017, 2017, 2020, 2021, 2023,
			2024, 2025, 2026, 2027, 2027, 2027, 2027, 2026, 2026, 2025, 2024,
			2024, 2024, 2025, 2026, 2027, 2028, 2030, 2030, 2030, 2030, 2031,
			2033, 2035, 2038, 2041, 2043, 2045, 2046, 2046, 2046, 2045, 2045,
			2046, 2046, 2047, 2047, 2047, 2047, 2047, 2048, 2049, 2052, 2056,
			2061, 2065, 2070, 2072, 2073, 2072, 2072, 2071, 2071, 2071, 2072,
			2074, 2076, 2078, 2080, 2081, 2083, 2085, 2089, 2091, 2094, 2096,
			2098, 2098, 2096, 2094, 2093, 2092, 2091, 2092, 2094, 2095, 2096,
			2095, 2094, 2091, 2088, 2084, 2081, 2079, 2078, 2075, 2073, 2069,
			2062, 2054, 2046, 2036, 2027, 2020, 2013, 2008, 2004, 2002, 1998,
			1996, 1993, 1991, 1987, 1985, 1982, 1980, 1978, 1976, 1974, 1973,
			1972, 1971, 1971, 1971, 1972, 1973, 1973, 1973, 1972, 1972, 1971,
			1971, 1972, 1973, 1974, 1976, 1977, 1977, 1976, 1975, 1974, 1973,
			1973, 1973, 1973, 1974, 1974, 1975, 1975, 1974, 1974, 1974, 1975,
			1977, 1978, 1981, 1982, 1983, 1982, 1982, 1981, 1980, 1980, 1981,
			1982, 1983, 1984, 1985, 1986, 1986, 1986, 1986, 1987, 1990, 1991,
			1991, 1991, 1990, 1987, 1985, 1983, 1982, 1982, 1984, 1986, 1990,
			1992, 1993, 1993, 1992, 1991, 1990, 1988, 1988, 1988, 1990, 1991,
			1991, 1991, 1991, 1991, 1990, 1991, 1991, 1992, 1993, 1993, 1992,
			1991, 1988, 1986, 1985, 1985, 1985, 1987, 1990, 1992, 1993, 1994,
			1994, 1994, 1994, 1994, 1995, 1996, 1996, 1995, 1994, 1993, 1991,
			1988, 1988, 1988, 1991, 1993, 1995, 1997, 1997, 1995, 1993, 1990,
			1987, 1986, 1986, 1988, 1991, 1993, 1995, 1995, 1995, 1993, 1992,
			1991, 1990, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1996, 1997,
			1998, 2001, 2003, 2005, 2006, 2007, 2007, 2007, 2007, 2007, 2007,
			2008, 2008, 2010, 2010, 2011, 2011, 2011, 2012, 2013, 2016, 2018,
			2021, 2023, 2023, 2022, 2020, 2016, 2013, 2010, 2007, 2006, 2005,
			2005, 2005, 2005, 2004, 2004, 2003, 2003, 2003, 2003, 2003, 2003,
			2003, 2001, 2000, 1997, 1996, 1995, 1996, 1997, 2000, 2001, 2002,
			2000, 1997, 1993, 1987, 1984, 1983, 1985, 1992, 2004, 2020, 2038,
			2059, 2078, 2094, 2106, 2112, 2110, 2102, 2086, 2066, 2044, 2018,
			1993, 1968, 1948, 1932, 1920, 1912, 1910, 1912, 1918, 1928, 1942,
			1956, 1972, 1986, 1998, 2008, 2014, 2017, 2020, 2021, 2021, 2023,
			2025, 2027, 2031, 2032, 2032, 2031, 2028, 2026, 2024, 2024, 2025,
			2027, 2031, 2034, 2035, 2036, 2034, 2032, 2030, 2027, 2027, 2030,
			2033, 2037, 2041, 2044, 2044, 2044, 2042, 2040, 2038, 2040, 2041,
			2043, 2046, 2048, 2050, 2051, 2051, 2051, 2052, 2052, 2054, 2056,
			2059, 2061, 2062, 2063, 2063, 2064, 2065, 2066, 2069, 2072, 2075,
			2079, 2081, 2083, 2084, 2085, 2086, 2088, 2090, 2091, 2093, 2095,
			2096, 2098, 2099, 2101, 2102, 2103, 2105, 2105, 2105, 2105, 2104,
			2103, 2102, 2102, 2102, 2104, 2105, 2108, 2108, 2108, 2106, 2103,
			2100, 2095, 2091, 2085, 2080, 2073, 2065, 2058, 2049, 2041, 2033,
			2026, 2022, 2018, 2016, 2014, 2012, 2008, 2004, 1998, 1994, 1991,
			1988, 1987, 1988, 1991, 1993, 1994, 1994, 1994, 1993, 1992, 1991,
			1992, 1993, 1995, 1997, 2000, 2001, 2001, 2001, 2000, 2000, 2000,
			2001, 2002, 2003, 2004, 2004, 2004, 2004, 2004, 2004, 2004, 2005,
			2005, 2005, 2003, 2001, 1998, 1995, 1993, 1992, 1993, 1995, 1998,
			2003, 2006, 2008, 2010, 2011, 2011, 2011, 2012, 2012, 2013, 2014,
			2015, 2014, 2014, 2013, 2012, 2012, 2012, 2013, 2015, 2017, 2018,
			2020, 2021, 2020, 2018, 2018, 2017, 2016, 2016,	2003, 2003, 2003,
			2005, 2005, 2005, 2004, 2004, 2003, 2003, 2003, 2003, 2003, 2003,
			2003, 2001, 2000, 1997, 1996, 1995, 1996, 1997, 2000, 2001, 2002,
			2000, 1997, 1993, 1987, 1984, 1983, 1985, 1992, 2004, 2020, 2038,
			2059, 2078, 2094, 2106, 2112, 2110, 2102, 2086, 2066, 2044, 2018,
			1993, 1968, 1948, 1932, 1920, 1912, 1910, 1912, 1918, 1928, 1942,
			1956, 1972, 1986, 1998, 2008, 2014, 2017, 2020, 2021, 2021, 2023,
			2025, 2027, 2031, 2032, 2032, 2031, 2028, 2026, 2024, 2024, 2025,
			2027, 2031, 2034, 2035, 2036, 2034, 2032, 2030, 2027, 2027, 2030,
			2033, 2037, 2041, 2044, 2044, 2044, 2042, 2040, 2038, 2040, 2041,
			2043, 2046, 2048, 2050, 2051, 2051, 2051, 2052, 2052, 2054, 2056,
			2059, 2061, 2062, 2063, 2063, 2064, 2065, 2066, 2069, 2072, 2075,
			2079, 2081, 2083, 2084, 2085, 2086, 2088, 2090, 2091, 2093, 2095,
			2096, 2098, 2099, 2101, 2102, 2103, 2105, 2105, 2105, 2105, 2104,
			2103, 2102, 2102, 2102, 2104, 2105, 2108, 2108, 2108, 2106, 2103,
			2100, 2095, 2091, 2085, 2080, 2073, 2065, 2058, 2049, 2041, 2033,
			2026, 2022, 2018, 2016, 2014, 2012, 2008, 2004, 1998, 1994, 1991,
			2125, 2115, 2096, 2073, 2048, 2024, 2002, 1983, 1966, 1952, 1941,
			1931, 1923, 1920, 1920, 1926, 1937, 1952, 1970, 1987, 2003, 2014,
			2022, 2025, 2024, 2022, 2020, 2017, 2017, 2017, 2020, 2021, 2023,
			2024, 2025, 2026, 2027, 2027, 2027, 2027, 2026, 2026, 2025, 2024,
			2024, 2024, 2025, 2026, 2027, 2028, 2030, 2030, 2030, 2030, 2031,
			2033, 2035, 2038, 2041, 2043, 2045, 2046, 2046, 2046, 2045, 2045,
			2046, 2046, 2047, 2047, 2047, 2047, 2047, 2048, 2049, 2052, 2056,
			2061, 2065, 2070, 2072, 2073, 2072, 2072, 2071, 2071, 2071, 2072,
			2074, 2076, 2078, 2080, 2081, 2083, 2085, 2089, 2091, 2094, 2096,
			2098, 2098, 2096, 2094, 2093, 2092, 2091, 2092, 2094, 2095, 2096,
			2095, 2094, 2091, 2088, 2084, 2081, 2079, 2078, 2075, 2073, 2069,
			2062, 2054, 2046, 2036, 2027, 2020, 2013, 2008, 2004, 2002, 1998,
			1996, 1993, 1991, 1987, 1985, 1982, 1980, 1978, 1976, 1974, 1973,
			1972, 1971, 1971, 1971, 1972, 1973, 1973, 1973, 1972, 1972, 1971,
			1971, 1972, 1973, 1974, 1976, 1977, 1977, 1976, 1975, 1974, 1973,
			1973, 1973, 1973, 1974, 1974, 1975, 1975, 1974, 1974, 1974, 1975,
			1977, 1978, 1981, 1982, 1983, 1982, 1982, 1981, 1980, 1980, 1981,
			1982, 1983, 1984, 1985, 1986, 1986, 1986, 1986, 1987, 1990, 1991,
			1991, 1991, 1990, 1987, 1985, 1983, 1982, 1982, 1984, 1986, 1990,
			1992, 1993, 1993, 1992, 1991, 1990, 1988, 1988, 1988, 1990, 1991,
			1991, 1991, 1991, 1991, 1990, 1991, 1991, 1992, 1993, 1993, 1992,
			1991, 1988, 1986, 1985, 1985, 1985, 1987, 1990, 1992, 1993, 1994,
			1994, 1994, 1994, 1994, 1995, 1996, 1996, 1995, 1994, 1993, 1991,
			1988, 1988, 1988, 1991, 1993, 1995, 1997, 1997, 1995, 1993, 1990,
			1987, 1986, 1986, 1988, 1991, 1993, 1995, 1995, 1995, 1993, 1992,
			1991, 1990, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1996, 1997,
			1998, 2001, 2003, 2005, 2006, 2007, 2007, 2007, 2007, 2007, 2007,
			2008, 2008, 2010, 2010, 2011, 2011, 2011, 2012, 2013, 2016, 2018,
			};
	private RelativeLayout layout3;
	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		SysApplication.getInstance().addActivity(this);
		TabHost tabHost = getTabHost();
		LayoutInflater.from(this).inflate(R.layout.heart_listen,
				tabHost.getTabContentView(), true);
		// 添加第一个标签页
		tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator("心电监测")
				.setContent(R.id.tab01));
		// 添加第二个标签页
		tabHost.addTab(tabHost.newTabSpec("tab2").setIndicator("诊断结论")
				.setContent(R.id.tab02));
		// 添加第三个标签页
		tabHost.addTab(tabHost.newTabSpec("tab3").setIndicator("操作说明")
				.setContent(R.id.tab03));

		dataList = new ArrayList<Float>();
		tempList=new ArrayList<Float>();
		resultList=new ArrayList<Float>();
		demoView = (DemoView) findViewById(R.id.demoview);
		// demoView.setData(data);
		layout3= (RelativeLayout) findViewById(R.id.layout3);
		Button startbutton = (Button) findViewById(R.id.start_bt_bn);
		Button stopbutton=(Button)findViewById(R.id.stop_bt_bn);
		Button savebutton=(Button)findViewById(R.id.savebutton);
		//bpm_textview= (TextView) findViewById(R.id.bpm_textview);
		startbutton.setOnClickListener(new OnClickListener() {
									   @Override
									   public void onClick(View arg0) {
											//连接蓝牙用的
//										   BluetoothAdapter bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
//										   BluetoothDevice bluetoothDevice = bluetoothAdapter.getRemoteDevice(SPutil.getString(getApplication(), ContantValue.BLUETOOTHADDRESS, ""));
//
//										   ConnectThread connectThread = new ConnectThread(bluetoothDevice, bluetoothAdapter, ecgData);
//										   connectThread.start();
										//模拟数据用的。
										    // Toast.makeText(getApplication(),ecgData.getDataList().get(0),Toast.LENGTH_SHORT).show();

											layout3.setVisibility(View.VISIBLE);
										    getdata();//开始绘制图片
									   }
								   });
		stopbutton.setOnClickListener(new OnClickListener() {
			@Override
			public void onClick(View view) {
				layout3.setVisibility(View.GONE);
			}
		});
		savebutton.setOnClickListener(new OnClickListener() {
			@Override
			public void onClick(View view) {
				Toast.makeText(getApplicationContext(),"保存成功",Toast.LENGTH_SHORT).show();
			}
		});

	}
//	class Myhandler extends Handler {
//		@Override
//		public void handleMessage(Message msg) {
//			switch (msg.what)
//			{
//				case Constant.MSG_ERROR:
//					Toast.makeText(getApplicationContext(),(String)msg.obj,Toast.LENGTH_SHORT);
//						break;
//				case Constant.MSG_CONNECTED_TO_SERVER:
//					Toast.makeText(getApplicationContext(),"正在连接",Toast.LENGTH_SHORT);
//					break;
//					default:
//						int result=msg.what;
//						bpm_textview.setText(result+""+"BPM");
//						break;
//			}
//
//
//		}
//	}
private Handler handler = new Handler() {
	public void handleMessage(Message msg) {
		switch (msg.what) {
			case 1:
				Log.e("aaa", intt+"");
//
//
				if (dataList.size()==0) {
					dataList.add(data[intt-1]);
				}else {
					dataList.add(0, data[intt-1]);
				}

				demoView.setData(dataList);

				break;

			default:
				break;
		}
	};
};
	private void getdata() {
		// TODO Auto-generated method stub
		new Thread() {
			public void run() {
				for (int index = 0; index < 3000; index++) {
					intt = index + 1;
					handler.sendEmptyMessage(1);
					try {
						sleep(15);
					} catch (InterruptedException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}
				}
			};
		}.start();
	}
	@Override
	protected void onDestroy()
	{
		super.onDestroy();
	}

}
